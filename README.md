# The Gender Pacing Gap: Berlin Marathon Analysis (1999â€“2025)

This repository contains the full dataset, source code, and supplementary materials for the study: **"The Gender Pacing Gap: Analysis of 873,000 Berlin Marathon Runners Reveals Men are Twice as Likely to â€˜Hit the Wallâ€™"**.

---

## ðŸ“‚ 1. Data Availability

Due to GitHub's file size limitations, the full datasets are hosted externally.

### ðŸ“¥ [CLICK HERE TO DOWNLOAD THE DATASETS (Google Drive)](https://drive.google.com/drive/folders/1Y0EkPjKQy6dtfzkIikwKNX3-B-FI6vfq?usp=drive_link)

### Dataset Files Description
The analysis pipeline transforms the raw data through 4 stages. Ensure these files are placed in the `data/` folder:

| File Name | Format | Description |
| :--- | :--- | :--- |
| **1. Dataset_Berlin_Marathon_1999-2025_original** | `.csv` | **Raw Data:** The original output from the web scraping process (1999-2025). |
| **2. Dataset_Berlin_Marathon_1999-2025** | `.parquet` | **Optimized Raw:** The CSV converted to Parquet format for memory efficiency (Output of Step 1). |
| **3. Dataset_Berlin_Cleaned_Analysis_Ready** | `.parquet` | **Cleaned Data:** Nulls removed, time strings converted to seconds, and outliers filtered (Output of Step 2). |
| **4. Dataset_Berlin_Features_Engineered** | `.parquet` | **Final Analysis Data:** Contains calculated pacing metrics (`pct_slowdown`, `hit_wall`) used for the figures (Output of Step 3). |

---

## ðŸ’» 2. Reproducibility Pipeline

To replicate the study, run the Jupyter Notebooks in the `notebooks/` folder in the following **exact order**:

### **Step 1: Optimization**
- **Notebook:** `OTIMIZATION.ipynb`
- **Goal:** drastically reduce memory usage (approx. 60% reduction) and convert the raw `.csv` to `.parquet`.
- **Input:** `Dataset_Berlin_Marathon_1999-2025_original.csv`
- **Output:** `Dataset_Berlin_Marathon_1999-2025.parquet`

### **Step 2: Data Cleaning**
- **Notebook:** `CLEANING.ipynb`
- **Goal:** Standardize gender formats (M/F), parse time strings (HH:MM:SS) into total seconds, and apply physiological filters (e.g., removing finish times > 6h15m).
- **Input:** `Dataset_Berlin_Marathon_1999-2025.parquet`
- **Output:** `Dataset_Berlin_Cleaned_Analysis_Ready.parquet`

### **Step 3: Feature Engineering & Analysis**
- **Notebook:** `MAIN_ANALYSIS.ipynb`
- **Goal:** 1. Calculate split metrics (Half-Marathon vs. Finish Time).
    2. Compute `pct_slowdown` (percentage deceleration in the 2nd half).
    3. Define "The Wall" logic (>20% slowdown).
    4. Perform statistical tests (Mann-Whitney U, Odds Ratio) and generate Figures 1, 2 and 3 (A, B, and C in the manuscript)
- **Input:** `Dataset_Berlin_Cleaned_Analysis_Ready.parquet`
- **Output:** `Dataset_Berlin_Features_Engineered.parquet` (and High-Res Figures).

---

## ðŸ“Š 3. Figures & Visualizations

High-resolution versions of the manuscript figures are generated by the `MAIN_ANALYSIS.ipynb` notebook and saved in the `figures/` folder.

### **Figure 1: Global Distribution of Pacing Strategies**
- **File:** `Figure_1_Density.tiff` (Figure A in the manuscript)
- **Type:** Kernel Density Estimation (KDE).
- **Insight:** Visualizes the "Pacing Tail," showing that men have a significantly higher density of extreme positive splits compared to women.

### **Figure 2: Pacing Stability by Performance Level**
- **File:** `Figure_2_Boxplot.tiff` (Figure C in the manuscript)
- **Type:** Boxplot Stratification.
- **Insight:** Confirms that the gender pacing gap persists across all performance levels, from Elite (<3h) to Casual (>4h30) runners.

- ### **Figure 3: Risk Analysis (The "Wall")**
- **File:** `Figure_3_Risk_Plot.tiff` (Figure B in the manuscript)
- **Type:** Bar Plot with Odds Ratio annotation.
- **Insight:** Demonstrates that men are ~2.0x more likely to experience a performance collapse (>20% slowdown) than women (p < 0.001).

---

## âš™ï¸ Requirements

To run the notebooks, check and install the requirements listed in Requirements.txt

## ðŸ“ž Contact
*Corresponding Author linked in the manuscript.*
